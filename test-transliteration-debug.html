<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transliteration Debug Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
        }
        .result {
            padding: 10px;
            background: #f0f0f0;
            margin: 5px 0;
            border-radius: 3px;
        }
        .match {
            background: #c8e6c9;
        }
        .no-match {
            background: #ffcdd2;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        .sinhala-text {
            font-size: 18px;
            font-weight: bold;
        }
        .singlish-text {
            color: #2196F3;
        }
    </style>
</head>
<body>
    <h1>Singlish Transliteration Debug Test</h1>
    
    <div class="test-section">
        <h2>Test Transliteration</h2>
        <input type="text" class="test-input" id="testInput" placeholder="Type Sinhala text or Singlish...">
        <div id="transliterationResult"></div>
    </div>
    
    <div class="test-section">
        <h2>Test Song Search</h2>
        <input type="text" class="test-input" id="searchInput" placeholder="Search for songs...">
        <div id="searchResults"></div>
    </div>
    
    <div class="test-section">
        <h2>All Songs with Transliteration</h2>
        <div id="songList"></div>
    </div>
    
    <script src="js/transliteration.js"></script>
    <script>
        // Sample song titles from your collection
        const songTitles = [
            "ඔබ දිව්‍ය පාමුලේ…",
            "අප අතරේ වැඩ වසනා - ජීවමාන යේසුස්",
            "අමතක කරන්න බෑ",
            "අහසටලය",
            "ඇයි යේසුනී මා නැසී",
            "ඉඩ දෙන්නම් සමිඳුනි මග හදා",
            "ඔබ ඕන තරම් දෙනවාටත් වඩා",
            "ජීසන් ඔබ මා ලඟින්",
            "දැයි සැයින් මාව පාවාගත්තේ",
            "දෙව්දූතින් ඔබුගේ තුරුණිය",
            "දෙවිඳුනී ඔබ කැමැත්තේද",
            "දෙවිඳුනී සැයින් මට කැඩිද",
            "නැරඹන්තරම",
            "පැරණි මඩ වැඩසටන",
            "මා සැතන් වලින් සැතුනින්",
            "මාදම වාරිය",
            "මුල් අහසටත් වඩා",
            "මාව ගලවාගත් දෙවිඳා ඔබයි",
            "වැන්නට ඔබ මන",
            "ශුද්ධාත්මන් මම සැදෙනම",
            "ශුද්ධාත්මන් වැඩෙන්න",
            "සමිඳු තුරුත්තිය",
            "හිසකම් දෙවිඳුන්"
        ];
        
        // Test transliteration input
        const testInput = document.getElementById('testInput');
        const transliterationResult = document.getElementById('transliterationResult');
        
        testInput.addEventListener('input', (e) => {
            const text = e.target.value;
            const singlish = Transliteration.toSinglish(text);
            const normalized = Transliteration.normalize(singlish);
            
            transliterationResult.innerHTML = `
                <div class="result">
                    <strong>Original:</strong> <span class="sinhala-text">${text}</span>
                </div>
                <div class="result">
                    <strong>Singlish:</strong> <span class="singlish-text">${singlish}</span>
                </div>
                <div class="result">
                    <strong>Normalized:</strong> <span class="singlish-text">${normalized}</span>
                </div>
            `;
        });
        
        // Test song search
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value;
            let html = '<table><tr><th>Song Title</th><th>Transliterated</th><th>Match Type</th></tr>';
            
            songTitles.forEach(title => {
                const titleSinglish = Transliteration.toSinglish(title);
                const exactMatch = Transliteration.matches(searchTerm, title);
                const fuzzyMatch = Transliteration.fuzzyMatches(searchTerm, title);
                
                let matchType = 'No Match';
                let rowClass = '';
                
                if (exactMatch) {
                    matchType = '✓ Exact Match';
                    rowClass = ' class="match"';
                } else if (fuzzyMatch) {
                    matchType = '✓ Fuzzy Match';
                    rowClass = ' class="match"';
                } else {
                    rowClass = ' class="no-match"';
                }
                
                html += `<tr${rowClass}>
                    <td class="sinhala-text">${title}</td>
                    <td class="singlish-text">${titleSinglish}</td>
                    <td>${matchType}</td>
                </tr>`;
            });
            
            html += '</table>';
            searchResults.innerHTML = html;
        });
        
        // Display all songs with transliteration
        const songList = document.getElementById('songList');
        let songListHtml = '<table><tr><th>#</th><th>Sinhala Title</th><th>Singlish Transliteration</th></tr>';
        
        songTitles.forEach((title, index) => {
            const singlish = Transliteration.toSinglish(title);
            songListHtml += `<tr>
                <td>${index + 1}</td>
                <td class="sinhala-text">${title}</td>
                <td class="singlish-text">${singlish}</td>
            </tr>`;
        });
        
        songListHtml += '</table>';
        songList.innerHTML = songListHtml;
    </script>
</body>
</html>
